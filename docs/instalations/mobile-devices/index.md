# Установка ALT Mobile на PinePhone Pro

Данная статья посвящена установке системы ALT Mobile на устройства PinePhone Pro и другой важной информации которая может пригодится при установке.

## Скачивание образа ALT Mobile

- Образ ALT Mobile можно скачать c [ftp](http://beta.altlinux.org/mobile/sisyphus/latest/), нам необходимы образы, содержащие в названии `pine`, к примеру `alt-mobile-phosh-pine-20240926-aarch64.img.xz`.

## Установка на внутреннюю память (emmc)

**Подготовка телефона:**

- Убедитесь, что на вашем PinePhone установлен загрузчик tow-boot на SPI flash.
- Для загрузки телефона в режиме экспорта emmc как USB-диска, при включении зажмите кнопку Volume Up.

**Графический способ установки:**

- Распакуйте скачанный образ ALT Mobile.
- Используйте gnome-disk-utility для записи образа на SD карту:
- Откройте gnome-disks и выберите USB-диск вашего PinePhone.
- Отформатируйте его и выберите пункт "Восстановить образ системы".
  - Укажите распакованный образ и начните процесс записи.
  - После записи рекомендуется расширить системный раздел. Для этого выберите пункт "Изменить размер"

**Запись образа ALT Mobile на emmc через терминал:**

- Выполните команду, где `sdX` - это накопитель вашего PinePhone(необходимо заменить X на ваши данные):

```shell
xzcat file.img.xz | dd of=/dev/sdX oflag=direct,sync iflag=fullblock bs=1M status=progress
```

- Рекомендуется увеличить размер файловой системы, это можно сделать командами:

```
echo ", +" | sfdisk -N 1 /dev/sdX
resize2fs -p /dev/sdX1
```

- После завершения процедуры, перезагрузите устройство для запуска с новой системой.

## Установка на SD карту

**Графический способ установки:**

- Распакуйте скаченный образ ALT Mobile.
- Используйте gnome-disk-utility для записи образа на SD карту:
- Откройте gnome-disks и выберите SD карту.
- Отформатируйте карту и выберите пункт "Восстановить образ системы".
- Укажите распакованный образ и начните процесс записи.

**Установка через терминал:**

- Используйте команду `dd` для записи образа ALT Mobile на SD карту:

```shell
xzcat file.img.xz | dd of=/dev/sdX oflag=direct,sync iflag=fullblock bs=1M status=progress
```

- После завершения записи, извлеките карту из компьютера и вставьте её в PinePhone.
- Для загрузки с SD карты, при включении телефона зажмите кнопку Volume Down.

## Установка Tow-Boot на PinePhone Pro

- Скачайте образ установщика Tow-Boot со [страницы релизов](https://github.com/Tow-Boot/Tow-Boot/releases/tag/release-2022.07-006). Образ установщика ищем согласно модели вашего устройства.

## Дополнительно

### Стандартные данные учётных записей

- Логины по умолчанию:
  root: `root`, password: `altlinux`;
  user: `altlinux`, password: `271828`.

### Порядок загрузки в PinePhone Pro

В PinePhone Pro используется следующий порядок загрузки по умолчанию:

1. **SPI flash:** Первым источником для поиска загрузчика является SPI flash. Если в нем установлен загрузчик (например, Tow-Boot или U-Boot), он будет использоваться для загрузки системы.
2. **Внутренняя память (eMMC):** Если загрузчик не найден в SPI flash, устройство попытается загрузиться с внутренней памяти eMMC.
3. **Карта microSD:** В случае отсутствия загрузчика в SPI flash и на eMMC, система попытается загрузиться с карты microSD.

**Выбор источника загрузки:**

- В **Explorer Edition, заказанном после ноября 2023 года**, карта microSD загружается первой из-за использования rk2aw вместо Tow-Boot.
- В **Explorer Edition, заказанной после июля 2022 года**, удерживайте клавишу уменьшения громкости во время включения устройства. Эти устройства поставляются с прошивкой Tow-Boot для SPI.
- В **Explorer Edition, заказанном в период с января по июль 2022 года**, удерживайте кнопку RE под крышкой в течение нескольких секунд при включении устройства. Для старых партий требуется перепрошивка Tow-Boot.

Этот порядок загрузки и возможность выбора источника обеспечивают гибкость в использовании PinePhone Pro, позволяя легко переключаться между различными операционными системами, установленными на разных носителях.

## Возможные проблемы

**Проблемы при прошивке emmc:**

- Если возникают проблемы с подключением, попробуйте перевернуть разъём Type-C.
- Убедитесь, что используете подходящий порт и кабель.
