# Установка ALT Mobile на RCA Cambio w101v2

Данная инструкция описывает процесс установки ОС Альт, в частности, ALT Mobile, на планшет-трансформер RCA Cambio w101v2.

:::danger Внимание!
Все действия, описанные в данной статье, вы выполняете на свой страх и риск. Автор статьи и сообщество ALT Linux Team, а также ООО "Базальт СПО" не несут ответственность за "окирпиченные" и сгоревшие приставки, затёртые данные пользователя, а также сгоревшие инструменты и прочие последствия.
:::


### Технические характеристики

#### Планшет

|      Компонент      |                                                        Название                                          |       Статус         |
| :-----------------: | :------------------------------------------------------------------------------------------------------: | :------------------: |
| Процессор           | Intel®️ Atom™️ Z3735F, 4 ядра на 1.33 GHz                                                                |    :green_circle:    |
| Дисплей             | 10.1 дюйма, 1280x800 пикселей, встроенная графика Intel HD                                               |    :green_circle:    |
| Оперативная память  | DDR3L 2GB                                                                                                |    :green_circle:    |
| Постоянная память   | 32GB eMMC, слот microSD (до 64GB)                                                                        |    :green_circle:    |
| Сенсорная панель    | SileadTouch, 10 точек касания                                                                            |    :green_circle:    |
| Звук                | Realtek ALC5642                                                                                          |    :green_circle:    |
| Питание             | 2 аккумулятора на 3.7В (ёмкость неизвестна, "до 6 часов работы от батареи"), чип контроля питания AXP288 |    :green_circle:    |
| WiFi                | Адаптер беспроводной сети Realtek RGN RTL8723BS 802.11 b/g/n 2.4GHz SDIO                                 |    :green_circle:    |
| Камеры              | 1MP (фронтальная) и 2MP (основная), обе на базе датчика OV2680                                           |  :red_circle:(\*)    |
| Датчик освещения    | Solteam JSA-1212                                                                                         |    :red_circle:      |
| Гироскоп            | Bosch BMG160                                                                                             |  :green_circle:(\**) |
| Акселерометр        | AK09911C8KXCJK-1013                                                                                      |    :green_circle:    |
| Вывод звука         | Моно динамик, порт для наушников 3,5мм                                                                   | :green_circle:(\***) |
| Вывод видео         | Mini HDMI                                                                                                |     green_circle:    |
| USB                 | Порт micro USB 2.0 (также для зарядки), порт USB 2.0                                                     |    :green_circle:    |

#### Док / Клавиатура

| Компонент |             Название            |     Статус     |
| :-------: | :-----------------------------: | :------------: |
| Ввод      | Клавиатура на 70 клавиш, тачпад | :green_circle: |

:::details Условные обозначения

:green_circle: `Работает` - работает в полном объёме

:yellow_circle: `Частично` - работает частично

:red_circle: `Не работает` - не работает

:white_circle: `Отсутствует` - не предусмотрено спецификацией

:::

### Примечания:

\* Отсутствует полноценный модуль ядра и драйвер.

\** Переворот происходит против часовой стрелки.

\*** Конфигурация звукового устройства не совпадает с распиновкой гнезда для наушников.

## Подготовка

Для установки ОС alt Mobile на планшет Lenovo MIIX 320-10ICR нам понадобятся

1. Флешка или карта памяти с записанным образом ALT Mobile для x86_64 

2. USB-разветвитель для клавиатуры, либо клавиатура со встроенным тачпадом (на случай, если комплектная клавиатура не работает, или вы купили планшет без клавиатуры в комплекте)

3. USB сетевая карта или WiFi-свисток 

### Подготовка накопителя

1. Скачиваем образ ОС:

```shell
wget http://ftp.altlinux.org/pub/beta/mobile/sisyphus/latest/alt-mobile-phosh-un-def-20240926-x86_64.img.xz
```

2. Вставляем флешку / карту памяти в ПК, смотрим, как она определилась в системе, и записываем образ:
```shell
lsblk

xzcat alt-mobile-phosh-un-def-20240926-x86_64.img.xz | dd of=/dev/<имя_устройства> oflag=direct,sync iflag=fullblock bs=1M status=progress
```

3. Монтируем наш накопитель, и под рутом копируем образ прямо на неё

```shell
[user@comp~]$ su -

[root@comp~]# cp /home/user/alt-mobile-phosh-un-def-20240926-x86_64.img.xz /run/media/user/<имя_накопителя>
```

4. Отмонтируем флешку.

## Установка

1. Подключаем USB-разветвитель в USB-разъём, к нему - клавиатуру, мышь, сетевую карту/WiFi-свисток и флешку/вставляем карту памяти в слот.

2. Включаем планшет (зажимаем кнопку включения на 2-3 секунды), и жмём на клавиатуре клавишу Del, пока не окажемся в BIOS.

3. Во вкладке Boot, в пункте Boot Option #1, выбираем нашу флешку/карту памяти.

4. Переходим во вкладку Save & Exit (клавиша вправо), выбираем пункт Save Changes and Exit, соглашаемся, выбрав пункт Yes и нажав на Enter, перезагружаем планшет.

5. Загружаемся в нашу ОС и входим в сессию (пароль входа - 271828, пароль рута - altlinux)

6. Мышкой кликаем один раз по значку терминала.

7. Переходим в режим рута и переходим в корень нашего накопителя:

```shell
[user@comp~]$ su -

[root@comp~]# cd /
```

8. Узнаём название устройства eMMC и записываем образ:

```shell
lsblk

xzcat alt-mobile-phosh-un-def-20240926-x86_64.img.xz | dd of=/dev/<имя_eMMC> oflag=direct,sync iflag=fullblock bs=1M status=progress
```

9. По окончании процесса записи кликаем по верхней панели, в верхнем правом углу - по кнопке питания, и в выпадающем меню выбираем пункт "Выключить". После выключения вынимаем установочный накопитель.
Доведение до ума

1. Включаем планшет и загружаемся в ОС. Первый запуск будет долгий - раздел с системой расширится на весь объём eMMC

2. Подключаемся к сети и запускаем Центр Приложений, заходим во вкладку Обновления и жмём кнопку "Обновить"

3. Устанавливаем все обновления - соглашаемся на перезагрузку. После перезагрузки планшет снова загрузится в ОС.

4. После установки обновлений нужно поставить несколько пакетов. Запускаем терминал и от рута устанавливаем следующие пакеты:

```shell
[user@comp~]$ su -

[root@comp~]# apt-get install kernel-image-6.10 kernel-modules-staging-6.10
```

5. Затем скачиваем файл прошивки сенсорной панели

```shell
[root@comp~]# wget https://github.com/onitake/gsl-firmware/blob/master/firmware/rca/w101v2/firmware.fw
```shell

6. Создаём каталог для прошивки и копируем её с нужным именем

```shell
[root@comp~]# mkdir /lib/firmware/silead && cp firmware.fw /lib/firmware/silead/silead_ts.fw
```

7. Открываем файл /etc/default/grub и приводим сторку с параметрами загрузки к следующему виду:

```shell
[root@comp~]# mcedit /etc/default/grub

GRUB_CMDLINE_LINUX_DEFAULT='panic=30 splash psi=1 console=tty1 console=ttyS0,115200n8 i2c_touchscreen_props=MSSL1680:touchscreen-swapped-x-y:touchscreen-inverted-y:touchscreen-min-x=5:touchscreen-min-y=12:touchscreen-size-x=1660:touchscreen-size-y=884'
```

8. Сохраняем изменения и запускаем update-grub

9. Перезагружаем планшет командой reboot и (скорее всего) радуемся работающему планшету.
